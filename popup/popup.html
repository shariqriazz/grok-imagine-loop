<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
    <h3 style="margin: 0; display: flex; align-items: center; gap: 8px;">
      <img src="../icons/icon48.png" style="width: 24px; height: 24px;">
      Grok Loop
    </h3>
    <button id="popOutBtn" title="Pop Out to Window"
      style="width: auto; padding: 4px 8px; font-size: 16px; background: transparent; border: 1px solid var(--border); color: var(--text-dim); border-radius: 8px;">
      ⇱
    </button>
  </div>

  <div class="input-group">
    <label for="initialImage">Initial Image (Optional)</label>
    <!-- Standard input for maximum compatibility with logic, styled simply -->
    <input type="file" id="initialImage" accept="image/*">
    <div id="restoredImageIndicator"
      style="display: none; flex-direction: column; margin-top: 8px; font-size: 11px; color: var(--success); gap: 5px;">
      <img id="restoredImagePreview"
        style="max-width: 100%; max-height: 120px; object-fit: contain; border-radius: 4px; border: 1px solid #333; background: #000;">
      <div style="display: flex; align-items: center; gap: 5px;">
        <span id="restoredImageText"></span>
        <button id="clearImageBtn"
          style="background: none; border: none; color: var(--danger); cursor: pointer; padding: 0; text-decoration: underline; font-size: 11px;">Clear</button>
      </div>
    </div>
  </div>

  <div class="input-group">
    <label for="prompt">Prompts (One per line)</label>
    <textarea id="prompt" placeholder="Enter your video prompts here...
Example:
A futuristic city...
The city lights up at night..."></textarea>
  </div>

  <div class="row">
    <div class="col input-group">
      <label for="loops">Scenes</label>
      <input type="number" id="loops" value="3" min="1">
    </div>
    <div class="col input-group">
      <label for="timeout">Timeout (s)</label>
      <input type="number" id="timeout" value="120" min="5">
    </div>
  </div>

  <div class="input-group" style="display: flex; flex-direction: column; gap: 8px;">
    <div style="display: flex; align-items: center; gap: 8px;">
      <input type="checkbox" id="upscale" style="width: auto; margin: 0;">
      <label for="upscale" style="margin: 0; cursor: pointer;">Upscale Result (High Quality)</label>
    </div>
    <div style="display: flex; align-items: center; gap: 8px;">
      <input type="checkbox" id="autoDownload" style="width: auto; margin: 0;">
      <label for="autoDownload" style="margin: 0; cursor: pointer;">Auto-Download Videos</label>
    </div>
  </div>

  <button id="resumeBtn" style="display: none;">Resume Previous Session</button>
  <button id="startBtn">Start Generation</button>

  <div style="text-align: center; margin-top: 15px; margin-bottom: 5px;">
    <button id="resetInputsBtn"
      style="background: none; border: none; color: var(--text-dim); font-size: 11px; cursor: pointer; padding: 0; text-decoration: underline;">Reset
      Inputs</button>
  </div>

  <div id="status" class="status">Ready</div>

  <hr>

  <div class="about-section">
    <h4>About</h4>
    <p style="margin: 0 0 8px;">Automate Grok Imagine looped videos.</p>
    <ul style="margin-bottom: 12px;">
      <li>Auto-Looping & Frame Extraction</li>
      <li>Pause/Resume Support</li>
      <li>Anti-Bot Protection</li>
    </ul>
    <div style="display: flex; gap: 8px; margin-top: 5px;">
      <button id="githubBtn">GitHub</button>
      <button id="kofiBtn">Buy ☕</button>
    </div>
  </div>

  <script src="popup.js"></script>
</body>

</html>